<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>prop</title>
</head>
<body>
	<script type="text/javascript">
		window.onload = function(){
			var oDiv = document.getElementById('div1');
			var oSpan = document.getElementById('span1');

			var aaa = function(){
				alert(1);
			}
			var bbb = function(){
				alert(2);
			}
			var ccc = function(){
				alert(3);
			}

			//add(oDiv,'click',aaa);
			//remove(oDiv,'click',aaa);

			//add(oSpan,'show',aaa);
			//add(oSpan,'show',bbb);


			add(oSpan,'hide',ccc);
			remove(oSpan,'hide',ccc);

			
			//trigger(oSpan, 'show');
			trigger(oSpan, 'hide');

			

		}

		function add(obj,types,fn){
			obj.listeners = obj.listeners || {};
			obj.listeners[types] = obj.listeners[types] || [];
			obj.listeners[types].push(fn);
			obj.addEventListener(types,fn,false)
		}


		function remove(obj,types,fn){
			obj.removeEventListener(types,fn,false);
			delete obj.listeners[types];
		}

		function trigger(obj,types){
			var arr = obj.listeners[types] || [];
			for(var i = 0; i<arr.length; i++){
				arr[i]();
			}
		}
	</script>
	<div id="div1">aaa</div>
	<span id="span1">sdfasf</span>
</body>
</html>
